<!-- index.html (head styles) -->
<style>
  html, body { margin:0; height:100%; background:#000; overflow:hidden; }
  #stage {
    position:relative; width:100%; height:100%;
    display:grid; place-items:center; background:#000; /* letterbox */
  }
  /* Keep the game at 2:3 no matter the screen */
  #canvas {
    display:block;
    image-rendering: pixelated;
    width: min(100vw, calc(100vh * 0.6666667)); /* 2/3 of height */
    height: auto;                                /* preserve aspect */
    max-height: min(100vh, calc(100vw * 1.5));   /* clamp by height (3/2 of width) */
    outline:none;
  }

  /* Fullscreen container fills screen; canvas sizing above still applies */
  :fullscreen #stage, #stage:fullscreen,
  :-webkit-full-screen #stage, #stage:-webkit-full-screen {
    width:100vw; height:100vh; background:#000;
  }
</style>

<body>
  <div id="stage">
    <button id="fullscreenBtn" type="button" style="position:absolute;top:10px;right:10px;z-index:2;">Full Screen</button>
    <canvas id="canvas" width="320" height="480"></canvas>
  </div>

  <script src="game.js?v=6"></script>
  <script>
    // Fullscreen button calls your helper; pass the STAGE, not the canvas
    document.getElementById('fullscreenBtn').addEventListener('click', (e) => {
      e.preventDefault();
      if (typeof window.requestGameFullscreen === 'function') {
        window.requestGameFullscreen(document.getElementById('stage'));
      } else {
        document.getElementById('stage')?.requestFullscreen?.();
      }
    }, { passive:false });
  </script>
</body>
